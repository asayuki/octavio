"use strict";

define([], function() {
    function a(a, b) {
        var c = "deactivate";
        if (a) {
            c = "activate";
        }
        fetch("/api/devices/" + b + "/" + c, {
            credentials: "same-origin",
            method: "post"
        }).then(function(a) {
            if (!a.ok) {
                console.log("Resp not ok");
            }
        }).catch(function(a) {
            console.log("Oh god, why");
        });
    }
    var b = {
        init: function b() {
            var c = document.querySelector(".fn-device-list");
            fetch("/api/devices", {
                credentials: "same-origin"
            }).then(function(b) {
                if (b.ok) {
                    b.json().then(function(b) {
                        b.devices.forEach(function(b) {
                            var d = document.createElement("li");
                            var e = document.createElement("button");
                            var f = document.createElement("button");
                            var g = document.createElement("span");
                            e.innerHTML = "On";
                            f.innerHTML = "Off";
                            g.innerHTML = " / ";
                            d.innerHTML = b.name + " - ";
                            d.appendChild(e);
                            d.appendChild(g);
                            d.appendChild(f);
                            e.addEventListener("click", a.bind(null, true, b._id));
                            f.addEventListener("click", a.bind(null, false, b._id));
                            c.appendChild(d);
                        });
                    });
                } else {
                    console.log("Resp not ok");
                }
            }).catch(function(a) {
                console.log("Oh god, why");
            });
        }
    };
    return b;
});
"use strict";

define([], function() {
    var a = {
        init: function a() {
            var b = document.querySelector("form.login-form");
            b.addEventListener("submit", function(a) {
                a.preventDefault();
                var c = b.querySelector('input[name="username"]').value;
                var d = b.querySelector('input[name="password"]').value;
                if (c === "" || d === "") {
                    return false;
                }
                fetch("/api/users/login", {
                    method: "post",
                    credentials: "same-origin",
                    body: JSON.stringify({
                        username: c,
                        password: d
                    })
                }).then(function(a) {
                    if (a.ok) {
                        window.location = "/";
                    } else {
                        console.log("Resp not ok");
                    }
                }).catch(function(a) {
                    console.log("Oh god, why");
                });
            });
        }
    };
    return a;
});